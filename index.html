<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generative Art Gallery</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            'sans': ['Inter', 'system-ui', 'sans-serif'],
            'mono': ['JetBrains Mono', 'monospace'],
          },
          animation: {
            'fade-in': 'fadeIn 0.6s ease-in-out',
            'slide-up': 'slideUp 0.4s ease-out',
            'scale-in': 'scaleIn 0.3s ease-out',
            'float': 'float 6s ease-in-out infinite',
            'glow': 'glow 2s ease-in-out infinite alternate',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0', transform: 'translateY(20px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' },
            },
            slideUp: {
              '0%': { transform: 'translateY(10px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' },
            },
            scaleIn: {
              '0%': { transform: 'scale(0.95)', opacity: '0' },
              '100%': { transform: 'scale(1)', opacity: '1' },
            },
            float: {
              '0%, 100%': { transform: 'translateY(0px)' },
              '50%': { transform: 'translateY(-10px)' },
            },
            glow: {
              '0%': { boxShadow: '0 0 20px rgba(59, 130, 246, 0.3)' },
              '100%': { boxShadow: '0 0 30px rgba(59, 130, 246, 0.6)' },
            },
          },
          backdropBlur: {
            'xs': '2px',
          },
        }
      }
    }
  </script>
</head>
<body class="bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 dark:from-gray-900 dark:via-blue-900 dark:to-purple-900 transition-all duration-500 min-h-screen">
  <div class="container mx-auto px-4 py-8 max-w-6xl">
    <!-- Header -->
    <header class="text-center mb-12 relative">
      <div class="absolute inset-0 bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 opacity-10 rounded-3xl blur-3xl animate-float"></div>
      <div class="relative z-10 backdrop-blur-xs bg-white/10 dark:bg-black/10 rounded-2xl p-8 border border-white/20 dark:border-gray-700/50">
        <h1 class="text-5xl md:text-7xl font-light text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 dark:from-blue-400 dark:via-purple-400 dark:to-pink-400 mb-4 animate-fade-in">
          Generative Art Gallery
        </h1>
        <p class="text-xl md:text-2xl text-gray-600 dark:text-gray-300 font-light animate-slide-up">
          インタラクティブなジェネラティブアート作品集
        </p>
        <div class="mt-4 flex justify-center space-x-2">
          <span class="px-3 py-1 bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200 rounded-full text-sm font-mono">p5.js</span>
          <span class="px-3 py-1 bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-200 rounded-full text-sm font-mono">Mathematics</span>
          <span class="px-3 py-1 bg-pink-100 dark:bg-pink-900/50 text-pink-800 dark:text-pink-200 rounded-full text-sm font-mono">Interactive</span>
        </div>
      </div>
    </header>

    <!-- Dark Mode Toggle -->
    <div class="flex justify-end mb-6">
      <button onclick="toggleDarkMode()" class="p-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
        <svg class="w-6 h-6 text-gray-800 dark:text-gray-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path class="dark:hidden" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
          <path class="hidden dark:block" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
        </svg>
      </button>
    </div>

    <!-- Main Layout: Sidebar + Content -->
    <div class="flex flex-col lg:flex-row gap-8">
      <!-- Left Sidebar: Art Selection -->
      <div class="lg:w-80 lg:flex-shrink-0">
        <div class="grid grid-cols-1 gap-4">
      <button onclick="loadSketch('flow_field')" class="group relative overflow-hidden rounded-2xl bg-white/70 dark:bg-gray-800/70 backdrop-blur-md shadow-lg hover:shadow-2xl transition-all duration-500 p-6 border border-emerald-200/50 dark:border-emerald-700/50 hover:border-emerald-400 dark:hover:border-emerald-500 hover:scale-105 transform">
        <div class="absolute inset-0 bg-gradient-to-br from-emerald-400 to-cyan-500 opacity-0 group-hover:opacity-20 transition-all duration-500"></div>
        <div class="absolute -top-10 -right-10 w-20 h-20 bg-emerald-400 rounded-full opacity-10 group-hover:opacity-20 group-hover:scale-110 transition-all duration-500"></div>
        <div class="relative z-10">
          <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2 group-hover:text-emerald-600 dark:group-hover:text-emerald-400 transition-colors">Flow Field Particles</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed">ノイズベースの流れ場に沿って動くパーティクル</p>
          <div class="mt-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
            <span class="inline-block w-2 h-2 bg-emerald-400 rounded-full animate-pulse"></span>
            <span class="text-xs text-emerald-600 dark:text-emerald-400 ml-2 font-mono">Interactive</span>
          </div>
        </div>
      </button>

      <button onclick="loadSketch('wave_interference')" class="group relative overflow-hidden rounded-2xl bg-white/70 dark:bg-gray-800/70 backdrop-blur-md shadow-lg hover:shadow-2xl transition-all duration-500 p-6 border border-purple-200/50 dark:border-purple-700/50 hover:border-purple-400 dark:hover:border-purple-500 hover:scale-105 transform">
        <div class="absolute inset-0 bg-gradient-to-br from-purple-400 to-pink-500 opacity-0 group-hover:opacity-20 transition-all duration-500"></div>
        <div class="absolute -top-10 -right-10 w-20 h-20 bg-purple-400 rounded-full opacity-10 group-hover:opacity-20 group-hover:scale-110 transition-all duration-500"></div>
        <div class="relative z-10">
          <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors">Wave Interference</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed">複数の波源からの干渉パターン</p>
          <div class="mt-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
            <span class="inline-block w-2 h-2 bg-purple-400 rounded-full animate-pulse"></span>
            <span class="text-xs text-purple-600 dark:text-purple-400 ml-2 font-mono">Interactive</span>
          </div>
        </div>
      </button>

      <button onclick="loadSketch('recursive_tree')" class="group relative overflow-hidden rounded-2xl bg-white/70 dark:bg-gray-800/70 backdrop-blur-md shadow-lg hover:shadow-2xl transition-all duration-500 p-6 border border-amber-200/50 dark:border-amber-700/50 hover:border-amber-400 dark:hover:border-amber-500 hover:scale-105 transform">
        <div class="absolute inset-0 bg-gradient-to-br from-amber-400 to-orange-500 opacity-0 group-hover:opacity-20 transition-all duration-500"></div>
        <div class="absolute -top-10 -right-10 w-20 h-20 bg-amber-400 rounded-full opacity-10 group-hover:opacity-20 group-hover:scale-110 transition-all duration-500"></div>
        <div class="relative z-10">
          <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2 group-hover:text-amber-600 dark:group-hover:text-amber-400 transition-colors">Recursive Tree</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed">風に揺れるフラクタルツリー</p>
          <div class="mt-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
            <span class="inline-block w-2 h-2 bg-amber-400 rounded-full animate-pulse"></span>
            <span class="text-xs text-amber-600 dark:text-amber-400 ml-2 font-mono">Interactive</span>
          </div>
        </div>
      </button>

      <button onclick="loadSketch('harmonic_waves')" class="group relative overflow-hidden rounded-2xl bg-white/70 dark:bg-gray-800/70 backdrop-blur-md shadow-lg hover:shadow-2xl transition-all duration-500 p-6 border border-cyan-200/50 dark:border-cyan-700/50 hover:border-cyan-400 dark:hover:border-cyan-500 hover:scale-105 transform">
        <div class="absolute inset-0 bg-gradient-to-br from-cyan-400 to-blue-500 opacity-0 group-hover:opacity-20 transition-all duration-500"></div>
        <div class="absolute -top-10 -right-10 w-20 h-20 bg-cyan-400 rounded-full opacity-10 group-hover:opacity-20 group-hover:scale-110 transition-all duration-500"></div>
        <div class="relative z-10">
          <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2 group-hover:text-cyan-600 dark:group-hover:text-cyan-400 transition-colors">Harmonic Waves</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed">正弦波と余弦波の美しい調和</p>
          <div class="mt-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
            <span class="inline-block w-2 h-2 bg-cyan-400 rounded-full animate-pulse"></span>
            <span class="text-xs text-cyan-600 dark:text-cyan-400 ml-2 font-mono">Interactive</span>
          </div>
        </div>
      </button>

      <button onclick="loadSketch('polar_rose')" class="group relative overflow-hidden rounded-2xl bg-white/70 dark:bg-gray-800/70 backdrop-blur-md shadow-lg hover:shadow-2xl transition-all duration-500 p-6 border border-pink-200/50 dark:border-pink-700/50 hover:border-pink-400 dark:hover:border-pink-500 hover:scale-105 transform">
        <div class="absolute inset-0 bg-gradient-to-br from-pink-400 to-rose-500 opacity-0 group-hover:opacity-20 transition-all duration-500"></div>
        <div class="absolute -top-10 -right-10 w-20 h-20 bg-pink-400 rounded-full opacity-10 group-hover:opacity-20 group-hover:scale-110 transition-all duration-500"></div>
        <div class="relative z-10">
          <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2 group-hover:text-pink-600 dark:group-hover:text-pink-400 transition-colors">Polar Rose</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed">極座標バラ曲線の幾何学模様</p>
          <div class="mt-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
            <span class="inline-block w-2 h-2 bg-pink-400 rounded-full animate-pulse"></span>
            <span class="text-xs text-pink-600 dark:text-pink-400 ml-2 font-mono">Interactive</span>
          </div>
        </div>
      </button>

      <button onclick="loadSketch('noise_field_sculpture')" class="group relative overflow-hidden rounded-2xl bg-white/70 dark:bg-gray-800/70 backdrop-blur-md shadow-lg hover:shadow-2xl transition-all duration-500 p-6 border border-lime-200/50 dark:border-lime-700/50 hover:border-lime-400 dark:hover:border-lime-500 hover:scale-105 transform">
        <div class="absolute inset-0 bg-gradient-to-br from-lime-400 to-green-500 opacity-0 group-hover:opacity-20 transition-all duration-500"></div>
        <div class="absolute -top-10 -right-10 w-20 h-20 bg-lime-400 rounded-full opacity-10 group-hover:opacity-20 group-hover:scale-110 transition-all duration-500"></div>
        <div class="relative z-10">
          <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2 group-hover:text-lime-600 dark:group-hover:text-lime-400 transition-colors">Noise Field Sculpture</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed">Perlinノイズによる地形等高線</p>
          <div class="mt-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
            <span class="inline-block w-2 h-2 bg-lime-400 rounded-full animate-pulse"></span>
            <span class="text-xs text-lime-600 dark:text-lime-400 ml-2 font-mono">Interactive</span>
          </div>
        </div>
      </button>

      <button onclick="loadSketch('mandelbrot')" class="group relative overflow-hidden rounded-2xl bg-white/70 dark:bg-gray-800/70 backdrop-blur-md shadow-lg hover:shadow-2xl transition-all duration-500 p-6 border border-indigo-200/50 dark:border-indigo-700/50 hover:border-indigo-400 dark:hover:border-indigo-500 hover:scale-105 transform">
        <div class="absolute inset-0 bg-gradient-to-br from-indigo-400 to-blue-500 opacity-0 group-hover:opacity-20 transition-all duration-500"></div>
        <div class="absolute -top-10 -right-10 w-20 h-20 bg-indigo-400 rounded-full opacity-10 group-hover:opacity-20 group-hover:scale-110 transition-all duration-500"></div>
        <div class="relative z-10">
          <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors">Mandelbrot集合</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed">複素数平面上の美しいフラクタル</p>
          <div class="mt-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
            <span class="inline-block w-2 h-2 bg-indigo-400 rounded-full animate-pulse"></span>
            <span class="text-xs text-indigo-600 dark:text-indigo-400 ml-2 font-mono">Interactive</span>
          </div>
        </div>
      </button>

      <button onclick="loadSketch('ornstein_uhlenbeck')" class="group relative overflow-hidden rounded-2xl bg-white/70 dark:bg-gray-800/70 backdrop-blur-md shadow-lg hover:shadow-2xl transition-all duration-500 p-6 border border-rose-200/50 dark:border-rose-700/50 hover:border-rose-400 dark:hover:border-rose-500 hover:scale-105 transform">
        <div class="absolute inset-0 bg-gradient-to-br from-rose-400 to-red-500 opacity-0 group-hover:opacity-20 transition-all duration-500"></div>
        <div class="absolute -top-10 -right-10 w-20 h-20 bg-rose-400 rounded-full opacity-10 group-hover:opacity-20 group-hover:scale-110 transition-all duration-500"></div>
        <div class="relative z-10">
          <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2 group-hover:text-rose-600 dark:group-hover:text-rose-400 transition-colors">Ornstein-Uhlenbeck過程</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed">確率微分方程式による軌道の可視化</p>
          <div class="mt-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
            <span class="inline-block w-2 h-2 bg-rose-400 rounded-full animate-pulse"></span>
            <span class="text-xs text-rose-600 dark:text-rose-400 ml-2 font-mono">Interactive</span>
          </div>
        </div>
      </button>

      <button onclick="loadSketch('gray_scott')" class="group relative overflow-hidden rounded-2xl bg-white/70 dark:bg-gray-800/70 backdrop-blur-md shadow-lg hover:shadow-2xl transition-all duration-500 p-6 border border-teal-200/50 dark:border-teal-700/50 hover:border-teal-400 dark:hover:border-teal-500 hover:scale-105 transform">
        <div class="absolute inset-0 bg-gradient-to-br from-teal-400 to-green-500 opacity-0 group-hover:opacity-20 transition-all duration-500"></div>
        <div class="absolute -top-10 -right-10 w-20 h-20 bg-teal-400 rounded-full opacity-10 group-hover:opacity-20 group-hover:scale-110 transition-all duration-500"></div>
        <div class="relative z-10">
          <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2 group-hover:text-teal-600 dark:group-hover:text-teal-400 transition-colors">Gray-Scott系</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed">反応拡散系による自己組織化パターン</p>
          <div class="mt-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
            <span class="inline-block w-2 h-2 bg-teal-400 rounded-full animate-pulse"></span>
            <span class="text-xs text-teal-600 dark:text-teal-400 ml-2 font-mono">Interactive</span>
          </div>
        </div>
      </button>
        </div>
      </div>

      <!-- Right Content: Canvas and Panels -->
      <div class="flex-1">
        <!-- Canvas Container -->
    <div class="relative bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-3xl shadow-2xl p-6 md:p-8 mb-8 border border-white/20 dark:border-gray-700/50 animate-scale-in overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-br from-blue-500/5 via-purple-500/5 to-pink-500/5 pointer-events-none"></div>
      <div id="canvas-container" class="flex justify-center items-center min-h-[500px] relative z-10 rounded-2xl overflow-hidden bg-black/5 dark:bg-white/5"></div>
    </div>

    <!-- Info Panel -->
    <div class="bg-gradient-to-r from-blue-50/80 via-indigo-50/80 to-purple-50/80 dark:from-blue-900/30 dark:via-indigo-900/30 dark:to-purple-900/30 backdrop-blur-md rounded-2xl p-6 mb-8 border border-blue-200/50 dark:border-blue-700/50 animate-slide-up">
      <div class="flex items-start space-x-4">
        <div class="bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl p-3 shadow-lg">
          <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
          </svg>
        </div>
        <div class="flex-1">
          <h4 class="text-blue-800 dark:text-blue-200 font-semibold mb-2 text-lg">操作方法</h4>
          <p id="sketch-info" class="text-blue-700 dark:text-blue-300 text-sm leading-relaxed">作品を選択すると操作方法が表示されます</p>
        </div>
      </div>
    </div>

    <!-- Parameters Panel (Hidden by default) -->
    <div id="parameters-panel" class="hidden bg-gradient-to-r from-gray-50/80 via-slate-50/80 to-gray-50/80 dark:from-gray-800/80 dark:via-slate-800/80 dark:to-gray-800/80 backdrop-blur-md rounded-2xl p-6 mb-8 border border-gray-200/50 dark:border-gray-700/50 animate-scale-in">
      <div class="flex items-center space-x-3 mb-6">
        <div class="bg-gradient-to-br from-gray-500 to-slate-600 rounded-xl p-3 shadow-lg">
          <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path>
          </svg>
        </div>
        <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-100">パラメータ調整</h3>
      </div>
      <div id="parameters-content" class="space-y-4">
        <!-- Dynamic parameters will be inserted here -->
      </div>
        </div>
      </div>
    </div>
  </div>

  <script src="sketch.js"></script>
  
  <script>
    // Dark mode toggle
    function toggleDarkMode() {
      document.documentElement.classList.toggle('dark');
      localStorage.setItem('darkMode', document.documentElement.classList.contains('dark'));
    }

    // Check for saved dark mode preference
    if (localStorage.getItem('darkMode') === 'true' || 
        (!localStorage.getItem('darkMode') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark');
    }

    // Enhanced loadSketch function
    function loadSketch(sketchName) {
      changeMode(sketchName);
      updateInfo(sketchName);
      updateActiveButton(sketchName);
      showParameters(sketchName);
    }

    // Update active button styling
    function updateActiveButton(sketchName) {
      const buttons = document.querySelectorAll('button[onclick^="loadSketch"]');
      buttons.forEach(button => {
        if (button.getAttribute('onclick').includes(sketchName)) {
          button.classList.add('ring-2', 'ring-offset-2', 'ring-gray-400', 'dark:ring-gray-600');
        } else {
          button.classList.remove('ring-2', 'ring-offset-2', 'ring-gray-400', 'dark:ring-gray-600');
        }
      });
    }

    // Update info text
    function updateInfo(sketchName) {
      const infoText = {
        'flow_field': 'マウスクリックで新しいパーティクルを追加できます',
        'wave_interference': 'マウスクリックで波源を移動、スペースキーで再配置、Rキーでパラメータ変更',
        'recursive_tree': 'マウスを動かして木の形を変更、スペースキーで再描画、Sキーで画像保存',
        'harmonic_waves': 'マウス位置で周波数と位相を調整、Rキーでリセット、Sキーで画像保存',
        'polar_rose': 'マウス位置でバラの形を変更、Rキーでリセット、Sキーで画像保存',
        'noise_field_sculpture': 'マウスで地形の詳細度と等高線数を調整、Rキーでリセット、Sキーで画像保存',
        'mandelbrot': 'マウスクリックでズーム、Rキーでリセット、Sキーで画像保存',
        'ornstein_uhlenbeck': 'マウス位置でパラメータ調整、Rキーでリセット、Sキーで画像保存',
        'gray_scott': 'マウスクリックで新しい種を追加、Rキーでリセット、Sキーで画像保存'
      };
      document.getElementById('sketch-info').textContent = infoText[sketchName] || '';
    }

    // Show parameters panel
    function showParameters(sketchName) {
      const panel = document.getElementById('parameters-panel');
      const content = document.getElementById('parameters-content');
      
      // Clear previous content
      content.innerHTML = '';
      
      if (sketchName === 'flow_field') {
        panel.classList.remove('hidden');
        content.innerHTML = `
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              ノイズスケール: <span id="noise-value">${noiseScale}</span>
            </label>
            <input type="range" min="0.001" max="0.1" step="0.001" value="${noiseScale}" 
                   onchange="noiseScale = parseFloat(this.value); document.getElementById('noise-value').textContent = this.value"
                   class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              最大速度: <span id="speed-value">2</span>
            </label>
            <input type="range" min="0.5" max="5" step="0.1" value="2" 
                   onchange="particles.forEach(p => p.maxSpeed = parseFloat(this.value)); document.getElementById('speed-value').textContent = this.value"
                   class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700">
          </div>
        `;
      } else if (sketchName === 'wave_interference') {
        panel.classList.remove('hidden');
        content.innerHTML = `
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              波の数: ${numWaves}
            </label>
            <p class="text-sm text-gray-600 dark:text-gray-400">Rキーを押してパラメータをランダム化</p>
          </div>
        `;
      } else if (sketchName === 'recursive_tree') {
        panel.classList.remove('hidden');
        content.innerHTML = `
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              枝の角度: マウスのX座標で調整
            </label>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              枝の長さ比: マウスのY座標で調整
            </label>
          </div>
        `;
      } else if (sketchName === 'mandelbrot') {
        panel.classList.remove('hidden');
        content.innerHTML = `
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              複素数平面の探索
            </label>
            <p class="text-sm text-gray-600 dark:text-gray-400">クリックして興味深い領域にズーム</p>
          </div>
        `;
      } else if (sketchName === 'ornstein_uhlenbeck') {
        panel.classList.remove('hidden');
        content.innerHTML = `
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              回帰速度θ: マウスのX座標で調整
            </label>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              ノイズ強度σ: マウスのY座標で調整
            </label>
          </div>
        `;
      } else if (sketchName === 'harmonic_waves') {
        panel.classList.remove('hidden');
        content.innerHTML = `
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              周波数X: マウスのX座標で調整
            </label>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              周波数Y: マウスのY座標で調整
            </label>
          </div>
        `;
      } else if (sketchName === 'polar_rose') {
        panel.classList.remove('hidden');
        content.innerHTML = `
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              花びらの数: マウスのX座標で調整
            </label>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              回転速度: マウスのY座標で調整
            </label>
          </div>
        `;
      } else if (sketchName === 'noise_field_sculpture') {
        panel.classList.remove('hidden');
        content.innerHTML = `
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              地形の詳細度: マウスのX座標で調整（左=広域、右=詳細）
            </label>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              等高線の数: マウスのY座標で調整
            </label>
          </div>
        `;
      } else if (sketchName === 'gray_scott') {
        panel.classList.remove('hidden');
        content.innerHTML = `
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
              反応拡散パターン
            </label>
            <p class="text-sm text-gray-600 dark:text-gray-400">クリックして新しい反応核を追加</p>
          </div>
        `;
      } else {
        panel.classList.add('hidden');
      }
    }

    // Initialize with first sketch on load
    window.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        loadSketch('flow_field');
      }, 50);
    });
  </script>
</body>
</html>